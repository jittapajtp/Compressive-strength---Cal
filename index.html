<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Strength Report Calculator</title>

  <!-- ‚úÖ PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }

    h1 {
      text-align: center;
      color: #0077ff;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      width: 100%;
      margin-top: 15px;
      padding: 15px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .calc-btn {
      background: #0077ff;
      color: white;
    }

    .copy-btn {
      background: green;
      color: white;
    }

    pre {
      background: #111;
      color: lime;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      white-space: pre-wrap;
      min-height: 150px;
    }

    .success {
      text-align: center;
      color: green;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>

<body>

<div class="container">
  <h1>Strength Report Calculator</h1>

  <!-- Age -->
  <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏£‡∏µ‡∏ï</label>
  <select id="age">
    <option value="1 hr">1 hr</option>
    <option value="24 hr">24 hr</option>
    <option value="7 Day" selected>7 Day</option>
    <option value="28 Day">28 Day</option>
  </select>

  <!-- Date -->
  <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö</label>
  <input type="date" id="date">

  <!-- Shift -->
  <label>Shift</label>
  <select id="shift">
    <option value="Day Shift">Day Shift</option>
    <option value="Night Shift">Night Shift</option>
  </select>

  <!-- Weight -->
  <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏•‡∏π‡∏Å‡∏õ‡∏π‡∏ô</h3>
  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 1 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</label>
  <input type="number" step="0.001" id="w1">

  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 2 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</label>
  <input type="number" step="0.001" id="w2">

  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 3 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</label>
  <input type="number" step="0.001" id="w3">

  <!-- Force -->
  <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á</h3>
  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 1 ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á</label>
  <input type="number" step="0.001" id="f1">

  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 2 ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á</label>
  <input type="number" step="0.001" id="f2">

  <label>‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà 3 ‡∏Ñ‡πà‡∏≤‡πÅ‡∏£‡∏á</label>
  <input type="number" step="0.001" id="f3">

  <!-- Buttons -->
  <button class="calc-btn" onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
  <button class="copy-btn" onclick="copyReport()">üìã Copy Report</button>

  <!-- Output -->
  <pre id="output">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ...</pre>
  <div class="success" id="msg"></div>
</div>

<script>
let reportText = "";

// Format Date ‚Üí DD/MM/YY
function formatDate(dateValue) {
  let d = new Date(dateValue);
  let day = String(d.getDate()).padStart(2, "0");
  let month = String(d.getMonth() + 1).padStart(2, "0");
  let year = String(d.getFullYear()).slice(-2);
  return `${day}/${month}/${year}`;
}

// Calculate
function calculate() {

  let age = document.getElementById("age").value;
  let rawDate = document.getElementById("date").value;
  let date = formatDate(rawDate);
  let shift = document.getElementById("shift").value;

  let w1 = parseFloat(document.getElementById("w1").value);
  let w2 = parseFloat(document.getElementById("w2").value);
  let w3 = parseFloat(document.getElementById("w3").value);

  let f1 = parseFloat(document.getElementById("f1").value);
  let f2 = parseFloat(document.getElementById("f2").value);
  let f3 = parseFloat(document.getElementById("f3").value);

  // MPa = Force √∑ 2500
  let m1 = f1 / 2500;
  let m2 = f2 / 2500;
  let m3 = f3 / 2500;

  // Average
  let avg = (m1 + m2 + m3) / 3;

  // Report Output
  reportText =
`${age} (${date} ${shift})
‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà1 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ${w1.toFixed(3)} ‡∏Ñ‡πà‡∏≤ ${m1.toFixed(3)} MPa
‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà2 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ${w2.toFixed(3)} ‡∏Ñ‡πà‡∏≤ ${m2.toFixed(3)} MPa
‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà3 ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å ${w3.toFixed(3)} ‡∏Ñ‡πà‡∏≤ ${m3.toFixed(3)} MPa
‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ${avg.toFixed(3)} MPa`;

  document.getElementById("output").textContent = reportText;
  document.getElementById("msg").textContent = "";
}

// Copy Report
function copyReport() {
  if (reportText === "") {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡πà‡∏≠‡∏ô Copy");
    return;
  }

  navigator.clipboard.writeText(reportText).then(() => {
    document.getElementById("msg").textContent =
      "‚úÖ Copy Report ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Line/Word ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢";
  });
}
</script>

<!-- ‚úÖ PWA Service Worker -->
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
